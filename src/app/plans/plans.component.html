<div class="plans">
  <div class="heading">
    <h2>Our Plans</h2>
    <p>Simple, transparent pricing</p>
    <span>Choose the plan that's right for you and start growing your subscription business <br> today.</span>
  </div>

  <div class="cards-align" *ngIf="!isloggedIn">
    <div class="card" *ngFor="let plan of filteredPlans" [ngClass]="{'popular': plan.popular}">
      <div class="badge" *ngIf="plan.popular">Most Popular</div>

      <div class="card-body">
        <div>
          <h5 class="card-title">{{ plan.name }}</h5>
          <p class="description">{{ plan.description }}</p>
          <h2 class="price">₹{{ plan.price }}</h2>
          <p class="discount">{{ plan.yearlyDiscount }}</p>

          <button *ngIf="plan.popular" class="pop-btn" (click)="routeToSignup(plan.category)">Get Started</button>
          <button *ngIf="!plan.popular" class="cho-btn" (click)="routeToSignup(plan.category)">Choose Plan</button>
          <span class="spl-features">Features Include</span>
          <ul class="features">
            <li *ngFor="let feature of plan.features">
              <i class="bi bi-check-circle-fill"></i> {{ feature }}
            </li>
          </ul>
        </div>


      </div>
    </div>
  </div>
  <div class="cards-align" *ngIf="isloggedIn">
    <div class="card" *ngFor="let plan of filteredPlans" [ngClass]="{'popular': plan.popular}">
      <div class="badge" *ngIf="plan.popular">Most Popular</div>
     

      <div class="card-body">
        <div>
          <h5 class="card-title">{{ plan.name }}</h5>
          <p class="description">{{ plan.description }}</p>
         
          <span class="spl-features">Features Include</span>
          <ul class="features">
            <li *ngFor="let feature of plan.features">
              <i class="bi bi-check-circle-fill"></i> {{ feature }}
            </li>
          </ul>
          <!-- <h2 class="price">₹{{ plan.price }}</h2> -->


          <button *ngIf="plan.popular" class="pop-btn" (click)="routeToSignup(plan.category)">₹{{ plan.price }}</button>
          <button *ngIf="!plan.popular" class="cho-btn" (click)="routeToSignup(plan.category)">₹{{ plan.price
            }} anually</button>
<p class="discount" style="text-align: center;">{{ plan.yearlyDiscount }}</p>

        </div>


      </div>
    </div>
  </div>
</div>

<ng-template #noAccModal let-modal>
  <div class="modal-header-pop">
    <div class="heading-mod my-modal text-center w-100">
      Select Your Preferences
    </div>

    <div class="modal-body d-flex flex-column justify-content-center align-items-center">
      <span class="mb-3">Select up to 3 areas of expertise</span>

      <!-- Preference Buttons -->
      <div class="d-flex flex-wrap justify-content-center gap-2 mb-3">
        <button *ngFor="let pref of preferenceOptions" type="button" class="btn" [ngClass]="{
                  'btn-outline-primary': !isSelected(pref),
                  'btn-primary text-white': isSelected(pref)
                }" (click)="toggleSelection(pref)">
          {{ pref }}
        </button>
      </div>

      <!-- Input field for "Others" -->
      <div *ngIf="showOtherInput" class="mb-3 d-flex gap-2 align-items-center w-75">
        <input type="text" class="form-control" [(ngModel)]="otherValue" placeholder="Enter your preference">
        <button class="btn btn-primary" (click)="addOtherPreference()">Add</button>
      </div>
      <span class="error" *ngIf="this.maxError">You can select a maximum of 3 preferences.</span>
      <span class="error" *ngIf="PrefError!=''">{{this.PrefError}}</span>
      <!-- Selected Preferences List -->
      <div *ngIf="selected.length > 0" class="w-100 px-3">
        <strong>Selected:</strong>
        <div class="d-flex flex-wrap gap-2 mt-2">
          <span *ngFor="let item of selected.controls" class="badge-chip">
            {{ item.value }}
            <span class="close-icon" (click)="toggleSelection(item.value)">×</span>
          </span>
        </div>
      </div>
    </div>

    <!-- Footer Button -->
    <div class="modal-footer d-flex flex-row justify-content-center">
      <button class="btn pop-btn1" (click)="savePreferrence()">Next</button>
    </div>
  </div>
</ng-template>
<ng-template #studentForm>

</ng-template>
<ng-template #professionalform>

</ng-template>
<ng-template #agencyForm>

</ng-template>