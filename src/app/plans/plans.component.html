<div class="plans">
  <div class="heading">
    <h2>Our Plans</h2>
    <p>Simple, transparent pricing</p>
    <span>Choose the plan that's right for you and start growing your subscription business <br> today.</span>
  </div>

  <div class="cards-align" *ngIf="!isloggedIn">
    <div class="card" *ngFor="let plan of filteredPlans" [ngClass]="{'popular': plan.popular}">
      <div class="badge" *ngIf="plan.popular">Most Popular</div>

      <div class="card-body">
        <div>
          <h5 class="card-title">{{ plan.name }}</h5>
          <p class="description">{{ plan.description }}</p>
          <h2 class="price">₹{{ plan.price }}</h2>
          <p class="discount">{{ plan.yearlyDiscount }}</p>

          <button *ngIf="plan.popular" class="pop-btn" (click)="routeToSignup(plan.category)">Get Started</button>
          <button *ngIf="!plan.popular" class="cho-btn" (click)="routeToSignup(plan.category)">Choose Plan</button>
          <span class="spl-features">Features Include</span>
          <ul class="features">
            <li *ngFor="let feature of plan.features">
              <i class="bi bi-check-circle-fill"></i> {{ feature }}
            </li>
          </ul>
        </div>


      </div>
    </div>
  </div>
  <div class="cards-align" *ngIf="isloggedIn">
    <div class="card" *ngFor="let plan of filteredPlans" [ngClass]="{'popular': plan.popular}">
      <div class="badge" *ngIf="plan.popular">Most Popular</div>


      <div class="card-body">
        <div>
          <h5 class="card-title">{{ plan.name }}</h5>
          <p class="description">{{ plan.description }}</p>

          <span class="spl-features">Features Include</span>
          <ul class="features">
            <li *ngFor="let feature of plan.features">
              <i class="bi bi-check-circle-fill"></i> {{ feature }}
            </li>
          </ul>
          <!-- <h2 class="price">₹{{ plan.price }}</h2> -->


          <button *ngIf="plan.popular" class="pop-btn" (click)="routeToSignup(plan.category)">₹{{ plan.price }}</button>
          <button *ngIf="!plan.popular" class="cho-btn" (click)="routeToSignup(plan.category)">₹{{ plan.price
            }} anually</button>
          <p class="discount" style="text-align: center;">{{ plan.yearlyDiscount }}</p>

        </div>


      </div>
    </div>
  </div>
</div>

<ng-template #noAccModal let-modal>
  <div class="modal-header-pop">
    <div class="heading-mod my-modal text-center w-100">
      Select Your Preferences
    </div>

    <div class="modal-body d-flex flex-column justify-content-center align-items-center">
      <span class="mb-3">Select up to 3 areas of expertise</span>

      <!-- Preference Buttons -->
      <div class="d-flex flex-wrap justify-content-center gap-2 mb-3">
        <button *ngFor="let pref of preferenceOptions" type="button" class="btn" [ngClass]="{
                  'btn-outline-primary': !isSelected(pref),
                  'btn-primary text-white': isSelected(pref)
                }" (click)="toggleSelection(pref)">
          {{ pref }}
        </button>
      </div>

      <!-- Input field for "Others" -->
      <div *ngIf="showOtherInput" class="mb-3 d-flex gap-2 align-items-center w-75">
        <input type="text" class="form-control" [(ngModel)]="otherValue" placeholder="Enter your preference">
        <button class="btn btn-primary" (click)="addOtherPreference()">Add</button>
      </div>
      <span class="error" *ngIf="this.maxError">You can select a maximum of 3 preferences.</span>
      <span class="error" *ngIf="PrefError!=''">{{this.PrefError}}</span>
      <!-- Selected Preferences List -->
      <div *ngIf="selected.length > 0" class="w-100 px-3">
        <strong>Selected:</strong>
        <div class="d-flex flex-wrap gap-2 mt-2">
          <span *ngFor="let item of selected.controls" class="badge-chip">
            {{ item.value }}
            <span class="close-icon" (click)="toggleSelection(item.value)">×</span>
          </span>
        </div>
      </div>
    </div>

    <!-- Footer Button -->
    <div class="modal-footer d-flex flex-row justify-content-center">
      <button class="btn pop-btn1" (click)="savePreferrence()">Next</button>
    </div>
  </div>
</ng-template>
<ng-template #studentForm let-modal>
  <div class="modal-header-pop">
    <div class="heading-mod my-modal text-center w-100">
      Enter Your Details
    </div>

    <div class="modal-body d-flex flex-column justify-content-center align-items-center">
      <form *ngIf="studentFormArea" [formGroup]="studentFormArea" class="w-100 px-4" (ngSubmit)="onSubmit()">
        
        <!-- College Name -->
        <div class="form-group mb-2">
          <label for="collegeName">College Name</label>
          <input type="text" class="form-control" id="collegeName" formControlName="collegeName">
        </div>

        <!-- City -->
        <div class="form-group mb-2">
          <label for="city">City</label>
          <input type="text" class="form-control" id="city" formControlName="city">
        </div>

        <!-- State -->
        <div class="form-group mb-2">
          <label for="state">State</label>
          <input type="text" class="form-control" id="state" formControlName="state">
        </div>

        <!-- Pincode -->
        <div class="form-group mb-2">
          <label for="pincode">Pincode</label>
          <input type="text" class="form-control" id="pincode" formControlName="pincode">
        </div>

        <!-- Document Upload -->
        <div class="form-group mb-3">
          <label for="document">Upload ID Card / Marksheet</label>
          <input type="file" class="form-control" id="document" (change)="onFileChange($event)" accept="image/*,application/pdf">
        </div>

        <!-- Submit Button -->
        <div class="modal-footer d-flex flex-row justify-content-center mt-3">
          <button type="submit" class="btn pop-btn1" [disabled]="studentFormArea.invalid">Submit</button>
        </div>
      </form>
    </div>
  </div>
</ng-template>


<ng-template #professionalForm>
  <div class="modal-header">
    <h5 class="modal-title">Professional Details</h5>
  </div>
  <div class="modal-body">
    <form *ngIf="professionalFormArea" [formGroup]="professionalFormArea" (ngSubmit)="onSubmitProfessional()">
      
      <div class="mb-3">
        <label>Current Employer Name</label>
        <input type="text" class="form-control" formControlName="currentEmployer" placeholder="Enter company name">
      </div>

      <div class="mb-3">
        <label>Designation / Job Title</label>
        <input type="text" class="form-control" formControlName="designation" placeholder="Enter your designation">
      </div>

      <div class="mb-3">
        <label>Work Email (Company Email)</label>
        <input type="email" class="form-control" formControlName="workEmail" placeholder="Enter company email">
      </div>

      <div class="mb-3">
        <label>Employment Type</label>
        <select class="form-control" formControlName="employmentType">
          <option value="">Select</option>
          <option value="Full-time">Full-time</option>
          <option value="Part-time">Part-time</option>
          <option value="Contractual">Contractual</option>
        </select>
      </div>

      <div class="mb-3">
        <label>Years of Experience</label>
        <input type="number" class="form-control" formControlName="experience" placeholder="Enter years of experience">
      </div>

      <div class="mb-3">
        <label>Offer/Joining/ID Proof Upload</label>
        <input type="file" class="form-control" (change)="onProfessionalFileChange($event)" accept=".pdf,.jpg,.jpeg,.png">
      </div>

      <div class="mb-3">
        <label>LinkedIn Profile (Optional)</label>
        <input type="url" class="form-control" formControlName="linkedin" placeholder="Enter LinkedIn URL">
      </div>

    

      <button type="submit" class="btn btn-primary w-100" [disabled]="!professionalFormArea.valid">Submit</button>
    </form>
  </div>
</ng-template>
<ng-template #agencyForm>
  <div class="modal-header">
    <h5 class="modal-title">Agency / Company Verification</h5>
  </div>
  <div class="modal-body">
    <form *ngIf="agencyFormArea" [formGroup]="agencyFormArea" (ngSubmit)="onSubmitAgency()">

      <div class="mb-3">
        <label>LinkedIn Company Page (Optional)</label>
        <input type="url" class="form-control" formControlName="linkedIn" placeholder="Enter LinkedIn URL">
      </div>

      <div class="mb-3">
        <label>Company Domain *</label>
        <input type="text" class="form-control" formControlName="domain" placeholder="e.g. www.example.com">
      </div>

      <div class="mb-3">
        <label>Services Offered *</label>
         <select class="form-control" formControlName="services">
          <option value="">Select</option>
          <option *ngFor="let service of servicesList" [value]="service">{{ service }}</option>
        </select>
      </div>

      <div class="mb-3">
        <label>Full Address *</label>
        <input type="text" class="form-control" formControlName="fullAddress" placeholder="Enter full address">
      </div>

      <div class="mb-3">
        <label>State *</label>
        <input type="text" class="form-control" formControlName="state" placeholder="Enter state">
      </div>

      <div class="mb-3">
        <label>PIN Code *</label>
        <input type="number" class="form-control" formControlName="pinCode" placeholder="Enter PIN Code">
      </div>

      <div class="mb-3">
        <label>No. of Employees *</label>
        <select class="form-control" formControlName="employees">
          <option value="">Select</option>
          <option *ngFor="let emp of employeeOptions" [value]="emp">{{ emp }}</option>
        </select>
      </div>

      <button type="submit" class="btn btn-primary w-100" [disabled]="!agencyFormArea.valid">Submit</button>
    </form>
  </div>
</ng-template>
